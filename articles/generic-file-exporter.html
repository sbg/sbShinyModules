<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Generic File Exporter Module: Integration and Examples • sbShinyModules</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generic File Exporter Module: Integration and Examples">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sbShinyModules</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/file-pickers.html">File Picker Module: Integration and Examples</a></li>
    <li><a class="dropdown-item" href="../articles/generic-file-exporter.html">Generic File Exporter Module: Integration and Examples</a></li>
    <li><a class="dropdown-item" href="../articles/load-files-and-metadata.html">Utility Function get_all_project_files(): Integration and Examples</a></li>
    <li><a class="dropdown-item" href="../articles/plot-exporter.html">Plot Exporter Module: Integration and Examples</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generic File Exporter Module: Integration and Examples</h1>
            
            <h4 data-toc-skip class="date">2024-09-16</h4>
      

      <div class="d-none name"><code>generic-file-exporter.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="module-overview">Module Overview<a class="anchor" aria-label="anchor" href="#module-overview"></a>
</h2>
<p>The Generic File Exporter Module offers a flexible and versatile
solution for saving diverse types of files within a Shiny application.
Unlike the specialized Plot Exporter Module, which focuses specifically
on plot exporting and includes options for resizing and format
selection, this module is designed to handle a broad range of file types
and formats, catering to diverse file-saving needs.</p>
<div class="section level3">
<h3 id="ui-function">UI Function<a class="anchor" aria-label="anchor" href="#ui-function"></a>
</h3>
<p>The UI function for this module creates a button within the Shiny app
interface. Clicking this button initiates the file-saving process. This
interface is minimalistic, providing a straightforward means for users
to trigger file-saving operations.</p>
<div class="section level4">
<h4 id="ui-function-call">UI Function Call<a class="anchor" aria-label="anchor" href="#ui-function-call"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mod_save_file_generic_ui.html">mod_save_file_generic_ui</a></span><span class="op">(</span><span class="st">"file_exporter_1"</span><span class="op">)</span></span></code></pre></div>
<center>
<div class="float">
<img src="figures/generic_file_exporter/generic_file_exporter_button.png" alt="Generic file exporter button"><div class="figcaption">Generic file exporter button</div>
</div>
</center>
<p><br></p>
</div>
</div>
<div class="section level3">
<h3 id="server-function">Server Function<a class="anchor" aria-label="anchor" href="#server-function"></a>
</h3>
<p>The server function of the Generic File Exporter Module is
responsible for executing the file-saving logic. When the user clicks
the save button, this function performs necessary checks and executes a
user-defined file-saving function with specified parameters. The
flexibility of this module allows you to define your own file-saving
functions and parameters, providing greater control over the file-saving
process.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li><p><strong>id</strong>: A unique identifier for the module
instance.</p></li>
<li><p><strong>reac_vals</strong>: A reactive values list that must
include the following fields:</p></li>
<li><p><strong>FUN</strong>: The function used to create the file (e.g.,
write.table, save, write_json, write_xml, SaveH5Seurat…).</p></li>
<li><p><strong>args</strong>: A list of arguments for the provided
function.</p></li>
<li><p><strong>filename</strong>: The name of the file to be
saved.</p></li>
<li><p><strong>extension</strong>: The expected file extension for
proper validation.</p></li>
<li><p><strong>overwrite</strong>: Boolean indicating if the file with
the same name should be overwritten.</p></li>
<li><p><strong>sbg_directory_path</strong>: Path to the mounted
/sbgenomics directory, which contains project-files, output-files, and
workspace sub-directories. This directory structure should mirror the
Platform file system for proper integration.</p></li>
</ul>
<p>You as a developer are responsible for defining these parameters and
integrating them with the module. You can also add additional UI
components, such as file name inputs or format selectors, and use their
values to populate the parameters provided to the server function.</p>
<p><strong>Note</strong>: For testing locally, you can create a mock
sbgenomics directory with the required structure.</p>
<p><strong>Feedback</strong>: Users receive clear alerts regarding the
success or failure of the file-saving process, ensuring they are
informed of any issues or confirmations.</p>
<div class="section level4">
<h4 id="server-function-call">Server Function Call<a class="anchor" aria-label="anchor" href="#server-function-call"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mod_save_file_generic_server.html">mod_save_file_generic_server</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="st">"file_exporter_1"</span>,</span>
<span>  reac_vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    FUN <span class="op">=</span> <span class="va">write.table</span>,</span>
<span>    args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">my_data_frame</span>, file <span class="op">=</span> <span class="st">"my_file.csv"</span><span class="op">)</span>,</span>
<span>    filename <span class="op">=</span> <span class="st">"my_file"</span>,</span>
<span>    extension <span class="op">=</span> <span class="st">"csv"</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span>,</span>
<span>  sbg_directory_path <span class="op">=</span> <span class="st">"/sbgenomics"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="example-generic-file-exporter-module-in-action">Example: Generic File Exporter Module in Action<a class="anchor" aria-label="anchor" href="#example-generic-file-exporter-module-in-action"></a>
</h2>
<p>The following Shiny app demonstrates the usage of the Generic File
Exporter module.</p>
<p><strong>Note:</strong> To run this example on your computer, please
ensure you have the <strong>sbShinyModules</strong> package
installed.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">sbShinyModules</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glin.github.io/reactable/" class="external-link">reactable</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jeroen.r-universe.dev/jsonlite" class="external-link">jsonlite</a></span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">###### Test modules for demonstrating nested modules ######</span></span>
<span><span class="va">test_module_ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/NS.html" class="external-link">NS</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span></span>
<span>      inputId <span class="op">=</span> <span class="fu">ns</span><span class="op">(</span><span class="st">"test_module_btn"</span><span class="op">)</span>,</span>
<span>      label <span class="op">=</span> <span class="st">"Test nesting modules"</span>,</span>
<span>      width <span class="op">=</span> <span class="st">"100%"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">test_module_server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">moduleServer</a></span><span class="op">(</span><span class="va">id</span>, module <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ns</span> <span class="op">&lt;-</span> <span class="va">session</span><span class="op">$</span><span class="va">ns</span></span>
<span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">test_module_btn</span>, <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/showModal.html" class="external-link">showModal</a></span><span class="op">(</span></span>
<span>        ui <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/modalDialog.html" class="external-link">modalDialog</a></span><span class="op">(</span></span>
<span>          title <span class="op">=</span> <span class="st">"Test nested modules"</span>,</span>
<span>          size <span class="op">=</span> <span class="st">"l"</span>,</span>
<span>          <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>            <span class="fu">reactable</span><span class="fu">::</span><span class="fu"><a href="https://glin.github.io/reactable/reference/reactable-shiny.html" class="external-link">reactableOutput</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"nested_table_data"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>              <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>                width <span class="op">=</span> <span class="fl">6</span>,</span>
<span>                <span class="fu">sbShinyModules</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_save_file_generic_ui.html">mod_save_file_generic_ui</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"save_file_nested"</span><span class="op">)</span><span class="op">)</span></span>
<span>              <span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          footer <span class="op">=</span> <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/tagList.html" class="external-link">tagList</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span><span class="fu">ns</span><span class="op">(</span><span class="st">"dismiss"</span><span class="op">)</span>,</span>
<span>              label <span class="op">=</span> <span class="st">"Dismiss"</span>,</span>
<span>              icon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/icon.html" class="external-link">icon</a></span><span class="op">(</span><span class="st">"xmark"</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">nested_table_data</span> <span class="op">&lt;-</span> <span class="fu">reactable</span><span class="fu">::</span><span class="fu"><a href="https://glin.github.io/reactable/reference/reactable-shiny.html" class="external-link">renderReactable</a></span><span class="op">(</span><span class="op">{</span></span>
<span>      <span class="fu">reactable</span><span class="fu">::</span><span class="fu"><a href="https://glin.github.io/reactable/reference/reactable.html" class="external-link">reactable</a></span><span class="op">(</span><span class="va">iris</span>,</span>
<span>        onClick <span class="op">=</span> <span class="st">"select"</span>,</span>
<span>        filterable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        searchable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        resizable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        defaultPageSize <span class="op">=</span> <span class="fl">10</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Close modal dialog by clicking the dismiss button</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">dismiss</span>, <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/showModal.html" class="external-link">removeModal</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Create reactive values list with mandatory fields to pass to the module</span></span>
<span>    <span class="va">helper_rv_nested</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactiveValues.html" class="external-link">reactiveValues</a></span><span class="op">(</span></span>
<span>      FUN <span class="op">=</span> <span class="va">write.table</span>,</span>
<span>      args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">iris</span>, quote <span class="op">=</span> <span class="cn">FALSE</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span>, col.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      filename <span class="op">=</span> <span class="st">"generic_file_name"</span>,</span>
<span>      extension <span class="op">=</span> <span class="st">".txt"</span>,</span>
<span>      overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="co"># Call the file exporter module</span></span>
<span>    <span class="fu">sbShinyModules</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_save_file_generic_server.html">mod_save_file_generic_server</a></span><span class="op">(</span></span>
<span>      id <span class="op">=</span> <span class="st">"save_file_nested"</span>,</span>
<span>      reac_vals <span class="op">=</span> <span class="va">helper_rv_nested</span>,</span>
<span>      sbg_directory_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>        <span class="st">"tests"</span>, <span class="st">"testthat"</span>, <span class="st">"sbgenomics_test"</span>,</span>
<span>        package <span class="op">=</span> <span class="st">"sbShinyModules"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">############## Test modules end ###########################</span></span>
<span></span>
<span><span class="co">##### Demo App's  UI #######</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html" class="external-link">titlePanel</a></span><span class="op">(</span><span class="st">"Save data for export to Platform - Module Demo"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarLayout</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarPanel</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Export txt/csv to Platform"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="st">"file_name"</span>, label <span class="op">=</span> <span class="st">"Set file name"</span>, width <span class="op">=</span> <span class="st">"100%"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>            width <span class="op">=</span> <span class="fl">6</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span><span class="st">"separator"</span>,</span>
<span>              label <span class="op">=</span> <span class="st">"Set separator"</span>,</span>
<span>              choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"comma"</span>, <span class="st">"tab"</span>, <span class="st">"new line"</span>, <span class="st">"semicolon"</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>            width <span class="op">=</span> <span class="fl">6</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span><span class="st">"extension"</span>,</span>
<span>              label <span class="op">=</span> <span class="st">"Set extension"</span>,</span>
<span>              choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"txt"</span>, <span class="st">"csv"</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>            width <span class="op">=</span> <span class="fl">6</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/radioButtons.html" class="external-link">radioButtons</a></span><span class="op">(</span><span class="st">"overwrite"</span>,</span>
<span>              label <span class="op">=</span> <span class="st">"Overwrite existing file?"</span>,</span>
<span>              choiceNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"yes"</span>, <span class="st">"no"</span><span class="op">)</span>,</span>
<span>              choiceValues <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRUE"</span>, <span class="st">"FALSE"</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>            width <span class="op">=</span> <span class="fl">12</span>,</span>
<span>            <span class="fu">sbShinyModules</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_save_file_generic_ui.html">mod_save_file_generic_ui</a></span><span class="op">(</span></span>
<span>              id <span class="op">=</span> <span class="st">"file_exporter"</span>,</span>
<span>              save_button_title <span class="op">=</span> <span class="st">"Save txt/csv"</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Export json to Platform"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="st">"file_name_json"</span>, label <span class="op">=</span> <span class="st">"Set file name"</span>, width <span class="op">=</span> <span class="st">"100%"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>            width <span class="op">=</span> <span class="fl">12</span>,</span>
<span>            <span class="fu">sbShinyModules</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_save_file_generic_ui.html">mod_save_file_generic_ui</a></span><span class="op">(</span></span>
<span>              id <span class="op">=</span> <span class="st">"json_file_exporter"</span>,</span>
<span>              save_button_title <span class="op">=</span> <span class="st">"Save json"</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Export RDS object to Platform"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textInput.html" class="external-link">textInput</a></span><span class="op">(</span><span class="st">"file_name_rds"</span>, label <span class="op">=</span> <span class="st">"Set file name"</span>, width <span class="op">=</span> <span class="st">"100%"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>            width <span class="op">=</span> <span class="fl">12</span>,</span>
<span>            <span class="fu">sbShinyModules</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_save_file_generic_ui.html">mod_save_file_generic_ui</a></span><span class="op">(</span></span>
<span>              id <span class="op">=</span> <span class="st">"rds_file_exporter"</span>,</span>
<span>              save_button_title <span class="op">=</span> <span class="st">"Save RDS"</span></span>
<span>            <span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Test nested modules"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>            width <span class="op">=</span> <span class="fl">12</span>,</span>
<span>            <span class="fu">test_module_ui</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"nested_modules"</span><span class="op">)</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">mainPanel</a></span><span class="op">(</span></span>
<span>      <span class="fu">reactable</span><span class="fu">::</span><span class="fu"><a href="https://glin.github.io/reactable/reference/reactable-shiny.html" class="external-link">reactableOutput</a></span><span class="op">(</span><span class="st">"table_data"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">###### Demo App's Server Logic ######</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">table_data</span> <span class="op">&lt;-</span> <span class="fu">reactable</span><span class="fu">::</span><span class="fu"><a href="https://glin.github.io/reactable/reference/reactable-shiny.html" class="external-link">renderReactable</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu">reactable</span><span class="fu">::</span><span class="fu"><a href="https://glin.github.io/reactable/reference/reactable.html" class="external-link">reactable</a></span><span class="op">(</span><span class="va">iris</span>,</span>
<span>      onClick <span class="op">=</span> <span class="st">"select"</span>,</span>
<span>      filterable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      searchable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      resizable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      defaultPageSize <span class="op">=</span> <span class="fl">10</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Create reactive values list with mandatory fields to pass to the module</span></span>
<span>  <span class="va">helper_rv_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactiveValues.html" class="external-link">reactiveValues</a></span><span class="op">(</span></span>
<span>    FUN <span class="op">=</span> <span class="va">write.table</span>,</span>
<span>    args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">iris</span>, quote <span class="op">=</span> <span class="cn">FALSE</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span>, col.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    filename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    extension <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html" class="external-link">observe</a></span><span class="op">(</span></span>
<span>    <span class="va">helper_rv_table</span><span class="op">$</span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">file_name</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html" class="external-link">observe</a></span><span class="op">(</span></span>
<span>    <span class="va">helper_rv_table</span><span class="op">$</span><span class="va">args</span><span class="op">[[</span><span class="st">"sep"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">separator</span>,</span>
<span>      <span class="st">"comma"</span> <span class="op">=</span> <span class="st">","</span>,</span>
<span>      <span class="st">"tab"</span> <span class="op">=</span> <span class="st">"\t"</span>,</span>
<span>      <span class="st">"new line"</span> <span class="op">=</span> <span class="st">"\n"</span>,</span>
<span>      <span class="st">"semicolon"</span> <span class="op">=</span> <span class="st">";"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html" class="external-link">observe</a></span><span class="op">(</span></span>
<span>    <span class="va">helper_rv_table</span><span class="op">$</span><span class="va">extension</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">extension</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html" class="external-link">observe</a></span><span class="op">(</span></span>
<span>    <span class="va">helper_rv_table</span><span class="op">$</span><span class="va">overwrite</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">as.logical</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">overwrite</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Call the file exporter module</span></span>
<span>  <span class="fu">sbShinyModules</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_save_file_generic_server.html">mod_save_file_generic_server</a></span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="st">"file_exporter"</span>,</span>
<span>    reac_vals <span class="op">=</span> <span class="va">helper_rv_table</span>,</span>
<span>    sbg_directory_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>      <span class="st">"tests"</span>, <span class="st">"testthat"</span>, <span class="st">"sbgenomics_test"</span>,</span>
<span>      package <span class="op">=</span> <span class="st">"sbShinyModules"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># Create reactive values list for json file export</span></span>
<span>  <span class="va">helper_rv_json</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactiveValues.html" class="external-link">reactiveValues</a></span><span class="op">(</span></span>
<span>    FUN <span class="op">=</span> <span class="va">write</span>,</span>
<span>    args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html" class="external-link">toJSON</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">iris</span>, dataframe <span class="op">=</span> <span class="st">"rows"</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    filename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    extension <span class="op">=</span> <span class="st">"json"</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html" class="external-link">observe</a></span><span class="op">(</span></span>
<span>    <span class="va">helper_rv_json</span><span class="op">$</span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">file_name_json</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Call the file exporter module</span></span>
<span>  <span class="fu">sbShinyModules</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_save_file_generic_server.html">mod_save_file_generic_server</a></span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="st">"json_file_exporter"</span>,</span>
<span>    reac_vals <span class="op">=</span> <span class="va">helper_rv_json</span>,</span>
<span>    sbg_directory_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>      <span class="st">"tests"</span>, <span class="st">"testthat"</span>, <span class="st">"sbgenomics_test"</span>,</span>
<span>      package <span class="op">=</span> <span class="st">"sbShinyModules"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># Create reactive values list for RDS file export</span></span>
<span>  <span class="va">helper_rv_rds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactiveValues.html" class="external-link">reactiveValues</a></span><span class="op">(</span></span>
<span>    FUN <span class="op">=</span> <span class="va">saveRDS</span>,</span>
<span>    args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      object <span class="op">=</span> <span class="va">iris</span></span>
<span>    <span class="op">)</span>,</span>
<span>    filename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    extension <span class="op">=</span> <span class="st">"RDS"</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html" class="external-link">observe</a></span><span class="op">(</span></span>
<span>    <span class="va">helper_rv_rds</span><span class="op">$</span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">file_name_rds</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Call the file exporter module</span></span>
<span>  <span class="fu">sbShinyModules</span><span class="fu">::</span><span class="fu"><a href="../reference/mod_save_file_generic_server.html">mod_save_file_generic_server</a></span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="st">"rds_file_exporter"</span>,</span>
<span>    reac_vals <span class="op">=</span> <span class="va">helper_rv_rds</span>,</span>
<span>    sbg_directory_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>      <span class="st">"tests"</span>, <span class="st">"testthat"</span>, <span class="st">"sbgenomics_test"</span>,</span>
<span>      package <span class="op">=</span> <span class="st">"sbShinyModules"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Call test module</span></span>
<span>  <span class="fu">test_module_server</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"nested_modules"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">###### Run the Shiny app #######</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marko Trifunovic, Marija Gacic, Velsera.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
